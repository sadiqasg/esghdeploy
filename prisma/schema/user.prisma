enum UserStatus {
  PENDING
  APPROVED
  SUSPENDED
  DISABLED
}

model User {
  id           Int     @id @default(autoincrement())
  email        String  @unique @db.VarChar(255)
  password     String  @db.VarChar(255)
  first_name   String  @db.VarChar(100)
  last_name    String? @db.VarChar(100)
  phone_number String? @db.VarChar(20)

  roleId Int
  role   Role @relation(fields: [roleId], references: [id])

  companyId Int
  company   Company? @relation(fields: [companyId], references: [id], name: "CompanyUsers")

  departmentId Int?
  department Department? @relation(fields: [departmentId], references: [id], name: "DepartmentUsers")

  permissions UserPermission[]

  status            UserStatus     @default(PENDING)
  profile_photo_url String?        @db.VarChar(255)
  last_login        DateTime?
  created_at        DateTime       @default(now())
  updated_at        DateTime       @updatedAt
  refreshTokens     RefreshToken[]
  otpHash           String?
  otpExpiresAt      DateTime?

  @@index([email])
  @@index([status])
  @@index([companyId])
  @@index([created_at])
  @@map("users")
}
